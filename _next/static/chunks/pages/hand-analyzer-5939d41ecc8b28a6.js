(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{1700:e=>{e.exports={wrapper:"HandAnalyzer_wrapper__jRPIZ",result:"HandAnalyzer_result__f6TST"}},3088:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/hand-analyzer",function(){return t(3565)}])},3565:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>ex});var r=t(7876),l=t(4232),n=t(9099),s=t(8291),i=t(4188),o=t(5050),c=t(4193),d=t(9021),u=t(3028),h=t(6480),p=t(9330),b=t(9545),v=t(8791),m=t(1804),g=t(5754),f={root:"m_4451eb3a"};let x={},j=(0,g.v)((e,a)=>{let t=(0,b.Y)("Center",x,e),{classNames:l,className:n,style:s,styles:i,unstyled:o,vars:c,inline:d,mod:u,...h}=t,p=(0,v.I)({name:"Center",props:t,classes:f,className:n,style:s,classNames:l,styles:i,unstyled:o,vars:c});return(0,r.jsx)(m.a,{ref:a,mod:[{inline:d},u],...p("root"),...h})});j.classes=f,j.displayName="@mantine/core/Center";var _=t(8755),y=t(8974),w=t(9848);function T(e,a){return t=>{if("string"!=typeof t||0===t.trim().length)throw Error(a);return`${e}-${t}`}}var k=t(6249),S=t(1609),C=t(4453),N=t(717),P=t(385);let[z,A]=(0,t(8671).F)("Tabs component was not found in the tree");var D={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",tab:"m_4ec4dce6",panel:"m_b0c91715",tabSection:"m_fc420b1f",tabLabel:"m_42bbd1ae","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};let H={},X=(0,P.P9)((e,a)=>{let t=(0,b.Y)("TabsList",H,e),{children:l,className:n,grow:s,justify:i,classNames:o,styles:c,style:d,mod:u,...h}=t,p=A();return(0,r.jsx)(m.a,{...h,...p.getStyles("list",{className:n,style:d,classNames:o,styles:c,props:t,variant:p.variant}),ref:a,role:"tablist",variant:p.variant,mod:[{grow:s,orientation:p.orientation,placement:"vertical"===p.orientation&&p.placement,inverted:p.inverted},u],"aria-orientation":p.orientation,__vars:{"--tabs-justify":i},children:l})});X.classes=D,X.displayName="@mantine/core/TabsList";let E={},I=(0,P.P9)((e,a)=>{let t=(0,b.Y)("TabsPanel",E,e),{children:l,className:n,value:s,classNames:i,styles:o,style:c,mod:d,keepMounted:u,...h}=t,p=A(),v=p.value===s,g=p.keepMounted||u||v?l:null;return(0,r.jsx)(m.a,{...h,...p.getStyles("panel",{className:n,classNames:i,styles:o,style:[c,v?void 0:{display:"none"}],props:t}),ref:a,mod:[{orientation:p.orientation},d],role:"tabpanel",id:p.getPanelId(s),"aria-labelledby":p.getTabId(s),children:g})});function L(e,a){let t=e;for(;(t=t.parentElement)&&!t.matches(a););return t}I.classes=D,I.displayName="@mantine/core/TabsPanel";var M=t(4533),Y=t(9193),B=t(958);let R={},W=(0,P.P9)((e,a)=>{let t=(0,b.Y)("TabsTab",R,e),{className:l,children:n,rightSection:s,leftSection:i,value:o,onClick:c,onKeyDown:d,disabled:u,color:h,style:p,classNames:v,styles:m,vars:g,mod:f,tabIndex:x,...j}=t,_=(0,M.xd)(),{dir:y}=(0,Y.jH)(),w=A(),T=o===w.value,k={classNames:v,styles:m,props:t};return(0,r.jsxs)(B.N,{...j,...w.getStyles("tab",{className:l,style:p,variant:w.variant,...k}),disabled:u,unstyled:w.unstyled,variant:w.variant,mod:[{active:T,disabled:u,orientation:w.orientation,inverted:w.inverted,placement:"vertical"===w.orientation&&w.placement},f],ref:a,role:"tab",id:w.getTabId(o),"aria-selected":T,tabIndex:void 0!==x?x:T||null===w.value?0:-1,"aria-controls":w.getPanelId(o),onClick:e=>{w.onChange(w.allowTabDeactivation&&o===w.value?null:o),c?.(e)},__vars:{"--tabs-color":h?(0,C.r)(h,_):void 0},onKeyDown:function({parentSelector:e,siblingSelector:a,onKeyDown:t,loop:r=!0,activateOnFocus:l=!1,dir:n="rtl",orientation:s}){return i=>{t?.(i);let o=Array.from(L(i.currentTarget,e)?.querySelectorAll(a)||[]).filter(a=>{var t;return t=i.currentTarget,L(t,e)===L(a,e)}),c=o.findIndex(e=>i.currentTarget===e),d=function(e,a,t){for(let t=e+1;t<a.length;t+=1)if(!a[t].disabled)return t;if(t){for(let e=0;e<a.length;e+=1)if(!a[e].disabled)return e}return e}(c,o,r),u=function(e,a,t){for(let t=e-1;t>=0;t-=1)if(!a[t].disabled)return t;if(t){for(let e=a.length-1;e>-1;e-=1)if(!a[e].disabled)return e}return e}(c,o,r),h="rtl"===n?u:d,p="rtl"===n?d:u;switch(i.key){case"ArrowRight":"horizontal"===s&&(i.stopPropagation(),i.preventDefault(),o[h].focus(),l&&o[h].click());break;case"ArrowLeft":"horizontal"===s&&(i.stopPropagation(),i.preventDefault(),o[p].focus(),l&&o[p].click());break;case"ArrowUp":"vertical"===s&&(i.stopPropagation(),i.preventDefault(),o[u].focus(),l&&o[u].click());break;case"ArrowDown":"vertical"===s&&(i.stopPropagation(),i.preventDefault(),o[d].focus(),l&&o[d].click());break;case"Home":i.stopPropagation(),i.preventDefault(),o[0].disabled||o[0].focus();break;case"End":{i.stopPropagation(),i.preventDefault();let e=o.length-1;o[e].disabled||o[e].focus()}}}}({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:y,onKeyDown:d}),children:[i&&(0,r.jsx)("span",{...w.getStyles("tabSection",k),"data-position":"left",children:i}),n&&(0,r.jsx)("span",{...w.getStyles("tabLabel",k),children:n}),s&&(0,r.jsx)("span",{...w.getStyles("tabSection",k),"data-position":"right",children:s})]})});W.classes=D,W.displayName="@mantine/core/TabsTab";let O="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",$={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,variant:"default",placement:"left"},q=(0,S.V)((e,{radius:a,color:t,autoContrast:r})=>({root:{"--tabs-radius":(0,k.nJ)(a),"--tabs-color":(0,C.r)(t,e),"--tabs-text-color":!function(e,a){return"boolean"==typeof e?e:a.autoContrast}(r,e)?void 0:(0,N.w)({color:t,theme:e,autoContrast:r})}})),F=(0,P.P9)((e,a)=>{let t=(0,b.Y)("Tabs",$,e),{defaultValue:l,value:n,onChange:s,orientation:i,children:o,loop:c,id:d,activateTabWithKeyboard:u,allowTabDeactivation:h,variant:p,color:g,radius:f,inverted:x,placement:j,keepMounted:_,classNames:k,styles:S,unstyled:C,className:N,style:P,vars:A,autoContrast:H,mod:X,...E}=t,I=(0,y.B)(d),[L,M]=(0,w.Z)({value:n,defaultValue:l,finalValue:null,onChange:s}),Y=(0,v.I)({name:"Tabs",props:t,classes:D,className:N,style:P,classNames:k,styles:S,unstyled:C,vars:A,varsResolver:q});return(0,r.jsx)(z,{value:{placement:j,value:L,orientation:i,id:I,loop:c,activateTabWithKeyboard:u,getTabId:T(`${I}-tab`,O),getPanelId:T(`${I}-panel`,O),onChange:M,allowTabDeactivation:h,variant:p,color:g,radius:f,inverted:x,keepMounted:_,unstyled:C,getStyles:Y},children:(0,r.jsx)(m.a,{ref:a,id:I,variant:p,mod:[{orientation:i,inverted:"horizontal"===i&&x,placement:"vertical"===i&&j},X],...Y("root"),...E,children:o})})});F.classes=D,F.displayName="@mantine/core/Tabs",F.Tab=W,F.Panel=I,F.List=X;var U=t(5597),V=(0,U.A)("filled","table-filled","IconTableFilled",[["path",{d:"M4 11h4a1 1 0 0 1 1 1v8a1 1 0 0 1 -1 1h-2a3 3 0 0 1 -2.995 -2.824l-.005 -.176v-6a1 1 0 0 1 1 -1z",key:"svg-0"}],["path",{d:"M21 12v6a3 3 0 0 1 -2.824 2.995l-.176 .005h-6a1 1 0 0 1 -1 -1v-8a1 1 0 0 1 1 -1h8a1 1 0 0 1 1 1z",key:"svg-1"}],["path",{d:"M18 3a3 3 0 0 1 2.995 2.824l.005 .176v2a1 1 0 0 1 -1 1h-8a1 1 0 0 1 -1 -1v-4a1 1 0 0 1 1 -1h6z",key:"svg-2"}],["path",{d:"M9 4v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1v-2a3 3 0 0 1 2.824 -2.995l.176 -.005h2a1 1 0 0 1 1 1z",key:"svg-3"}]]),J=t(3839),K=(0,U.A)("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]),Z=(0,U.A)("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]),G=t(4727),Q=t(1823),ee=t(9788),ea=t(9672);let et=e=>{let{rank:a,suit:t,iconSize:l=14}=e,n={size:l},s={H:(0,r.jsx)(G.A,{...n,color:"red"}),D:(0,r.jsx)(Q.A,{...n,color:"red"}),S:(0,r.jsx)(ee.A,{...n,color:"black"}),C:(0,r.jsx)(ea.A,{...n,color:"black"})}[t];return(0,r.jsxs)(i.Y,{gap:4,wrap:"nowrap",align:"center",children:[(0,r.jsx)(o.E,{size:"sm",children:a}),s]})};var er=t(3819),el=t.n(er);let en=(e,a)=>{switch(a){case"combined_avg":return e.scoreData.combined.avg;case"combined_min":return e.scoreData.combined.min;case"hand_avg":return e.scoreData.hand.avg;case"hand_min":return e.scoreData.hand.min;case"crib_avg":return e.scoreData.crib.avg;case"crib_min":return e.scoreData.crib.min}},es=e=>{let{direction:a}=e;return"asc"===a?(0,r.jsx)(K,{size:14}):"desc"===a?(0,r.jsx)(Z,{size:14}):(0,r.jsx)("span",{style:{width:14,height:14,display:"inline-block"}})},ei=[{label:"Avg",key:"combined_avg",withBorder:!0},{label:"Min",key:"combined_min"},{label:"Avg",key:"hand_avg",withBorder:!0},{label:"Min",key:"hand_min"},{label:"Avg",key:"crib_avg",withBorder:!0},{label:"Min",key:"crib_min"}],eo=e=>{let{sortBy:a,sortDirection:t,onSortChange:l}=e,n=function(e,n){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=a===n;return(0,r.jsx)(J.X.Th,{className:s?el().cellBorderLeft:"",style:{userSelect:"none",whiteSpace:"nowrap",textAlign:"center",cursor:"pointer"},onClick:()=>l(n),children:(0,r.jsxs)(i.Y,{justify:"center",gap:4,wrap:"nowrap",children:[(0,r.jsx)(o.E,{fw:700,size:"xs",c:"#555",children:e}),(0,r.jsx)(es,{direction:c?t:null})]})},n)};return(0,r.jsxs)(J.X.Thead,{children:[(0,r.jsxs)(J.X.Tr,{children:[(0,r.jsx)(J.X.Th,{rowSpan:2,className:el().discardCell,children:"Discards"}),(0,r.jsx)(J.X.Th,{colSpan:2,className:el().groupHeader,children:"Hand + Crib"}),(0,r.jsx)(J.X.Th,{colSpan:2,className:el().groupHeader,children:"Hand"}),(0,r.jsx)(J.X.Th,{colSpan:2,className:el().groupHeader,children:"Crib"})]}),(0,r.jsx)(J.X.Tr,{children:ei.map(e=>{let{label:a,key:t,withBorder:r}=e;return n(a,t,r)})})]})},ec=e=>{let{hands:a}=e,[t,n]=(0,l.useState)("combined_avg"),[s,o]=(0,l.useState)("desc"),c=[...a].sort((e,a)=>{let r=en(e,t),l=en(a,t);return r===l?0:"asc"===s?r-l:l-r}),d=ei.reduce((e,t)=>{let{key:r}=t;return e[r]=Math.max(...a.map(e=>en(e,r))),e},{}),u=(e,a)=>e.endsWith("_avg")?a.toFixed(1):Math.round(a).toString();return(0,r.jsx)("div",{className:el().tableWrapper,children:(0,r.jsxs)(J.X,{striped:!0,children:[(0,r.jsx)(eo,{sortBy:t,sortDirection:s,onSortChange:e=>{t===e?o("asc"===s?"desc":"asc"):(n(e),o("desc"))}}),(0,r.jsx)(J.X.Tbody,{children:c.map((e,a)=>(0,r.jsxs)(J.X.Tr,{children:[(0,r.jsx)(J.X.Td,{className:el().discardCell,children:(0,r.jsx)(i.Y,{gap:"xs",wrap:"nowrap",children:e.discard.map((e,a)=>{let t=e.slice(0,-1),l=e.slice(-1);return(0,r.jsx)(et,{rank:t,suit:l},a)})})}),ei.map(a=>{let{key:t,withBorder:l}=a,n=en(e,t),s=n===d[t];return(0,r.jsx)(J.X.Td,{className:"".concat(l?el().cellBorderLeft:""," ").concat(s?el().highlightCell:""),style:{textAlign:"center",whiteSpace:"nowrap"},children:u(t,n)},t)})]},a))})]})})};var ed=t(6570),eu=t.n(ed);let eh=(e,a)=>{let[r,n]=(0,l.useState)(null),[s,i]=(0,l.useState)(!1);return(0,l.useEffect)(()=>{if(!e)return;i(!0);let r=new Worker(t.tu(new URL(t.p+t.u(907),t.b)),{type:void 0});return r.postMessage({handKey:e,isMyCrib:a}),r.onmessage=e=>{n(e.data),i(!1),r.terminate()},()=>r.terminate()},[e,a]),{result:r,loading:s}},ep=(e,a)=>{let[t,r]=(0,l.useState)(null),n="".concat(e,"-").concat(a?"Y":"N");(0,l.useEffect)(()=>{if(!e)return;let a=localStorage.getItem(n);if(a)try{r(JSON.parse(a))}catch(e){r(null)}},[e,a]);let{result:s,loading:i}=eh(t?void 0:e,a);return(0,l.useEffect)(()=>{if(!i&&s&&!t&&1)try{localStorage.setItem(n,JSON.stringify(s)),r(s)}catch(e){}},[i,s,t,n]),{result:null!=t?t:s,loading:!t&&i}},eb=e=>{let{queryParams:a}=e,t=(0,n.useRouter)(),l=a.data,o="Y"===a.crib;if(!l)return(0,r.jsx)("div",{children:"No hand data provided"});let{result:d,loading:u}=ep(l,o);return u?(0,r.jsx)(j,{mt:"xl",style:{height:"700px"},children:(0,r.jsx)(_.a,{color:"blue",size:"lg"})}):d&&0!==d.length?(0,r.jsxs)("div",{className:eu().wrapper,children:[(0,r.jsxs)(i.Y,{justify:"space-between",mb:"md",children:[(0,r.jsx)(s.h,{order:3,children:"RESULTS"}),(0,r.jsx)(c.$,{onClick:()=>t.push("/hand-analyzer"),children:"Check new hand"})]}),(0,r.jsxs)(F,{variant:"pills",defaultValue:"table",children:[(0,r.jsx)(F.List,{children:(0,r.jsx)(F.Tab,{value:"table",leftSection:(0,r.jsx)(V,{size:12}),children:"Table"})}),(0,r.jsx)(F.Panel,{value:"table",children:(0,r.jsx)(ec,{hands:d,isMyCrib:o})})]})]}):(0,r.jsx)("div",{children:"No results available."})};var ev=t(2845),em=t(1700),eg=t.n(em);let ef=()=>{let e=(0,n.useRouter)(),[a,t]=(0,l.useState)(void 0),[b,v]=(0,l.useState)([null,null,null,null,null,null]),[m,g]=(0,l.useState)(!1),f=(e,a)=>{let t=[...b];t[e]=a,v(t)};return((0,l.useEffect)(()=>{t(e.query)},[e.isReady,e.query]),a&&Object.keys(a).length>0)?(0,r.jsx)(eb,{queryParams:a}):(0,r.jsxs)("div",{className:eg().wrapper,children:[(0,r.jsx)(s.h,{order:2,children:"Hand Analyzer"}),(0,r.jsxs)(i.Y,{mb:"md",mt:"md",justify:"space-between",children:[(0,r.jsx)(o.E,{fw:500,children:"Your Hand (6 cards):"}),(0,r.jsx)(c.$,{onClick:()=>{v((0,ev.PB)(6))},rightSection:(0,r.jsx)(h.A,{size:14}),children:"Random Hand"})]}),(0,r.jsx)(d.B,{gap:"xs",children:b.map((e,a)=>(0,r.jsx)(p.O,{value:e,onChange:e=>f(a,e)},a))}),(0,r.jsx)(u.d,{label:"My Crib",mt:"sm",checked:m,onChange:e=>g(e.currentTarget.checked)}),(0,r.jsx)(c.$,{onClick:()=>{if(b.some(e=>!e))return void alert("Please select all 6 cards");if(new Set(b.filter(e=>null!==e).map(ev.V$)).size<b.length)return void alert("Duplicate cards detected. Please ensure all 6 cards are unique.");let a=(0,ev.kk)(b);e.push({pathname:e.pathname,query:{data:a,crib:m?"Y":"N"}},void 0,{shallow:!0})},mt:"sm",fullWidth:!0,children:"Analyze Hand"})]})};function ex(){return(0,r.jsx)(l.Fragment,{children:(0,r.jsx)(ef,{})})}},3819:e=>{e.exports={discardCell:"Table_discardCell__XdCRj",groupHeader:"Table_groupHeader__umNP7",cellBorderLeft:"Table_cellBorderLeft__nWWfX",highlightCell:"Table_highlightCell__QYuLj",tableWrapper:"Table_tableWrapper__3G5LH"}},6570:e=>{e.exports={wrapper:"Results_wrapper__13LOh"}}},e=>{var a=a=>e(e.s=a);e.O(0,[265,330,636,593,792],()=>a(3088)),_N_E=e.O()}]);